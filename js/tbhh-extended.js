/* tbhh-extended.js - Minified 2025-08-25 */
window.tbhhExtended={setupAgentBypass:function(e){if("true"===(e=>{const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null})("agent_bypass")){console.log("✅ Agent bypass cookie detected. Suppressing registration popup.");const t=setInterval(()=>{if("object"==typeof e&&e.closePop)try{e.closePop(),e.openSignLog=()=>console.log("🚫 Registration popup blocked (agent bypass)."),clearInterval(t)}catch(e){console.warn("Bypass error:",e)}},300);setTimeout(()=>clearInterval(t),5e3)}else console.log("ℹ️ No agent bypass cookie detected.")},setupPhoneReplacement:function(){function e(){document.querySelectorAll(".schedule-agent-info a.phone:not(.replaced)").forEach((e,t)=>{const n=document.createElement("button"),o=e.textContent.replace(/^\+1/,"");n.textContent=o,n.style.fontSize="20px",n.style.fontWeight="bold",n.style.backgroundColor="#23c864",n.style.color="#000000",n.style.border="none",n.style.padding="8px 16px",n.style.cursor="pointer",n.style.borderRadius="4px",n.style.display="block",n.style.margin="10px auto",n.style.width="100%",n.style.marginLeft="-30px",n.style.marginRight="-30px",n.style.boxSizing="border-box";const s=e.closest(".schedule-agent-info");s&&(e.parentNode.removeChild(e),s.appendChild(n),n.classList.add("replaced"))})}if(window.location.href.startsWith("https://tampabayhousehunter.com/listing-detail/")){e();let t=!1;new MutationObserver(()=>{t||(t=!0,e(),t=!1)}).observe(document.body,{childList:!0,subtree:!0})}},setupAgentMenuReplacement:function(){const e=window.location.hostname;if(!("tampabayhousehunter.com"!==e&&e.endsWith("tampabayhousehunter.com")))return;const t=e.split(".")[0],n=t.charAt(0).toUpperCase()+t.slice(1);function o(){document.querySelectorAll('a, button, span, .dropdown-item, .menu-item, [role="button"], h1, h2, h3, h4, h5, h6').forEach(e=>{e.textContent&&(e.textContent.includes("Meet David")&&(e.textContent=e.textContent.replace("Meet David","Meet "+n)),e.textContent.includes("Sold By David")&&(e.textContent=e.textContent.replace("Sold By David","Sold By "+n)),e.textContent.includes("About David")&&(e.textContent=e.textContent.replace("About David","About "+n)))})}o();new MutationObserver(o).observe(document.body,{childList:!0,subtree:!0}),setInterval(o,2e3)},setupBrokerElements:function(){if(!window.tbhhBrokerInfo)return;const e=window.tbhhBrokerInfo,t=e.isSubdomain;function n(){document.querySelectorAll(".company, .broker-name, [data-broker-name], .co-name").forEach(t=>{(t.textContent.includes("Dalton Wade Real Estate Group")||t.textContent.includes("Future Home Realty")||"Dalton Wade"===t.textContent.trim()||"FHR"===t.textContent.trim())&&(t.textContent=e.name)}),t&&document.querySelectorAll(".detail-info, .owner-info, .agent-info").forEach(e=>{e.closest(".subdomain-detail")||(e.style.display="none")})}n();new MutationObserver(n).observe(document.body,{childList:!0,subtree:!0}),setInterval(n,3e3)},init:function(e){this.setupAgentBypass(e),this.setupPhoneReplacement(),this.setupAgentMenuReplacement(),this.setupBrokerElements(),console.log("✅ TBHH Extended features initialized")}};